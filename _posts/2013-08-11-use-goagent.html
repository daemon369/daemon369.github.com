---
layout: post
keywords: goagent
description: use goagent
title: "使用GoAgent代理"
categories: [Network]
tags: [GoAgent, agent, Network, Linux]
group: Network
icon: file-alt
---
{% include JB/setup %}

<p class="paragraph">
GoAgent 是使用跨平台语言 Python 开发的代理软件，利用 Google App Engine 的服务器充当代理，帮助用户浏览一些被封锁或被过滤的内容 。
</p>
<p class="paragraph">
我们可以使用该软件来浏览一些被GFW墙掉的东西，譬如twitter，facebook，youtobe等。这对于程序员来说很有用，因为很多技术的学习是需要在包括google等英文网站上面查找翻看资料的。但是这对大陆居民来说却不是一件简单的事情。由于GFW的封锁，许多网站都登录不了，或者时断时续的无法观看。我至今都不明白封锁android官网的意义，毕竟只是一个技术网站而已。
</p>
<p class="paragraph">
你可以花钱买一些付费代理来突破封锁，但目前我用GoAgent已经基本足够了。
</p>
<p class="paragraph">
1.首先申请Google Appengine并创建appid。打开网页<a href="https://appengine.google.com/start">https://appengine.google.com/start</a>注册并登录。
</p>
<p><img src="/image/2013-08-11/1.png" alt="" /></p>
<p class="paragraph">
2.点击Create Application按钮
</p>
<p><img src="/image/2013-08-11/2.png" alt="" /></p>
<p class="paragraph">
3.然后需要进行身份验证。输入手机号码并点击发送验证码，输入接收到的验证码。
</p>
<p><img src="/image/2013-08-11/3.png" alt="" /></p>
<p class="paragraph">
4.输入appid，这里appid不能和别人重复，点击Check Avaliablity可以检查你输入的appid是否可用；接受google协议然后点击create application。这样你的appid就创建好了
</p>
<p class="paragraph">
5.Linux下需要安装一些软件。我的系统是Ubuntu。
</p>
<p class="paragraph">
请参考：<a href="https://code.google.com/p/goagent/wiki/GoAgent_Linux">GoAgent_Linux</a>
</p>
<p class="paragraph">
目前最新的GoAgent版本为2013-08-13发布的3.0.4版本，需要安装python3.3和PyOpenSSL才能正常运行。
</p>
<p class="paragraph">
安装python3.3，有两种方法。一. 从源安装：
</p>
<pre name="code" class="prettyprint">sudo apt-get install python3-dev </pre>
<p class="paragraph">
二. 从源码编译安装：
</p>
<pre name="code" class="prettypring">
wget http://python.org/ftp/python/3.3.2/Python-3.3.2.tar.bz2 && tar jxvf Python-3.3.2.tar.bz2 && cd Python-3.3.2 && ./configure --with-ssl && make && sudo make install
</pre>
<p class="paragraph">
安装PyOpenSSL，一. 从源中安装：
</p>
<pre name="code" class="prettypring">
sudo apt-get install python3-openssl
</pre>
<p class="paragraph">
二. 通过python包管理器pip安装：
</p>
<pre name="code" class="prettypring">
sudo apt-get install python3-pip
sudo pip3 install pyOpenSSL
</pre>
<p class="paragraph">
三. 从源码编译安装：
</p>
<pre name="code" class="prettypring">
wget http://pypi.python.org/packages/source/p/pyOpenSSL/pyOpenSSL-0.13.tar.gz && tar zxvf pyOpenSSL-0.13.tar.gz && cd pyOpenSSL-0.13 && sudo python3 setup.py install
</pre>
<p class="paragraph">
<span>安装greenlet，目前版本0.4.0</span>
</p>
<pre name="code" class="prettyprint">curl -L -O https://github.com/python-greenlet/greenlet/archive/0.4.0.tar.gz &amp;&amp; tar xvzpf 0.4.0.tar.gz &amp;&amp; cd greenlet-0.4.0 &amp;&amp; sudo python setup.py install</pre>
<p class="paragraph">
<span>安装gevent，目前版本 1.0rc2</span>
</p>
<pre name="code" class="prettyprint">curl -L -O https://github.com/downloads/SiteSupport/gevent/gevent-1.0rc2.tar.gz &amp;&amp; tar xvzpf gevent-1.0rc2.tar.gz &amp;&amp; cd gevent-1.0rc2 &amp;&amp; sudo python setup.py install</pre>
<p class="paragraph">
<span>安装gtk托盘所需环境</span>
</p>
<pre name="code" class="prettyprint">sudo apt-get install python-appindicator python-vte</pre>
<p class="paragraph">
<span>6.下载goagent</span>
</p>
<p class="paragraph">
到<a href="https://code.google.com/p/goagent/">https://code.google.com/p/goagent/</a>下载最新goagent，目前最新 [20130813]3.0.4版本。
</p>
<p class="paragraph">
下载后解压到本地目录，例如goagent-goagent-365c2c1，打开goagent-goagent-365c2c1/local/proxy.ini文件，修改[gae]下面的appid=你自己申请的appid，保存文件并退出。
</p>
<p class="paragraph">
7.上传服务端，进入goagent-goagent-365c2c1/server目录，运行命令：
</p>
<pre name="code" class="prettyprint">$ python uploader.zip</pre>
<p class="paragraph">
8.进入目录goagent-goagent-365c2c1/local/，运行python脚本，第一次运行需要管理员权限，以后就不需要了。
</p>
<pre name="code" class="prettyprint">$ cd goagent-goagent-365c2c1/local/
$ sudo python3 goagent-gtk.py</pre>
<p class="paragraph">
<span>然后就可以在firefox等浏览器中使用goagent代理。</span>
</p>
<p class="paragraph">
9.在firefox中使用goagent代理
</p>
<p class="paragraph">
首先在firefox中安装autoproxy插件。通过菜单项：工具-&gt;AutoProxy首选项，打开AutoProxy配置。
</p>
<p><img src="/image/2013-08-11/4.png" alt="" /></p>
<p>&nbsp;</p>
<p class="paragraph">
选择菜单：代理服务器-&gt;编辑代理服务器，然后添加如下：
</p>
<p><img src="/image/2013-08-11/5.png" alt="" /></p>
<p>&nbsp;</p>
<p class="paragraph">
点击确定后，在AutoProxy首选项窗口选择菜单：代理服务器-&gt;选择代理服务器：
</p>
<p><img src="/image/2013-08-11/6.png" alt="" /></p>
<p class="paragraph">
设置新建的代理服务器为默认代理服务器。
</p>
<p>&nbsp;</p>
<p class="paragraph">10.在google chrome浏览器中使用goagent
</p>
<p class="paragraph">
<span>首先安装</span><a href="https://chrome.google.com/webstore/detail/dpplabbmogkhghncfbfdeeokoefdjegm" rel="nofollow">SwitchySharp</a><span>插件</span>
</p>
<p><span><img src="/image/2013-08-11/7.png" alt="" /><br /></span></p>
<p><span>&nbsp;</span></p>
<p class="paragraph">
<span>然后导入这个设置</span><a href="https://goagent.googlecode.com/files/SwitchyOptions.bak" rel="nofollow">https://goagent.googlecode.com/files/SwitchyOptions.bak</a>
</p>
<p><img src="/image/2013-08-11/8.png" alt="" /></p>
<p>&nbsp;</p>
<p class="paragraph">
Tips：
</p>
<p class="paragraph">
1.不是每次升级goagent都需要重新上传服务端。只有你升级的版本带[是]的，或者你的升级跨越了多个版本，其中某个版本带[是]，这样你就需要重新上传服务端。
</p>
<p class="paragraph">
2.每个帐号可以创建10个appid，在proxy.ini文件里[gae]写的appid字段后面添加所有appid，中间用"|"分隔，就可以使用10个appid来负载均衡，而且每个appid每天有1G免费流量，10个appid保证你能每天使用10G流量。
</p>
<p class="paragraph">
3.别人若知道了你的appid，是可以使用你的帐号的，而每个帐号每天只能有1G的免费流量。因此，你可以设置密码来保护你的流量不被盗用。解决办法就是给你的appid加上密码。在goagent-goagent-365c2c1/server/python/wsgi.py文件中找到__password__字段，在后面的单引号里填入你的密码，然后重新上次服务端。然后在goagent-goagent-365c2c1/local/proxy.ini文件中，在[gae]下的password字段后面输入你的密码，不需要加引号。重启GoAgent客户端即可。
</p>
<p class="paragraph">
GoAgent的原理可用下图来描述：
</p>
<p><img src="/image/2013-08-11/9.png" alt="" /></p>
<p>&nbsp;</p>
<p class="paragraph">
<span>使用中遇到问题可以到</span><a href="https://code.google.com/p/goagent/    ">https://code.google.com/p/goagent/</a><span>查看FAQ等</span>
</p>
<p class="paragraph">
Windows下的使用更简单，这里就不介绍了。
</p>
